<html>
    <head>
        <title>Résultats</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> 
        <script src="../js/manageResult.js" type="module"></script>
        <link rel="stylesheet" href="../css/resultatsQuestionnaire.css">
    </head>
    <body>
        <div id='wrapper'>

            <div id='ul_container' class='sidenav'></div>
            <div id='right_side'>
                <div id='right_top'>
                    <div id='right_top_elements'>
                        <div id='correction'>

                            <p><i>cliquez sur une question dans la liste à gauche afin de voir sa correction...</i></p>
                        </div>
                        <div id='Ans1'></div>
                        <div id='Ans2'></div>
                        <div id='Ans3'></div>
                        <div id='Ans4'></div>
                        <div id='Ans5'></div>
                        <div id='Ans6'></div>
                        <div id='Ans7'></div>
                        <div id='Ans8'></div>
                        <div id='Ans9'></div>
                        <div id='Ans10'></div>
                        <div id='Ans11'></div>
                    </div>

                    <div id='right_mid_elements'>
                        <div id='selected'>

                            <p><i></i></p>
                        </div>
                        <div id='Sel1'></div>
                        <div id='Sel2'></div>
                        <div id='Sel3'></div>
                        <div id='Sel4'></div>
                        <div id='Sel5'></div>
                        <div id='Sel6'></div>
                        <div id='Sel7'></div>
                        <div id='Sel8'></div>
                        <div id='Sel9'></div>
                        <div id='Sel10'></div>
                        <div id='Sel11'></div>
                    </div>
                </div>
                <div id='right_bottom'>
                    <div id='right_bottom_elements'>

                        <div class="reponsesCorrectes">
                            <h3 id="nbrTotalRep"></h3>
                            <h3 id="percentageTrue"></h3>
                        </div>
                        <div class="btnSuivante">
                            <button  id="retourMenu" type="button" class="btn btn-success" onclick= "returnMenu()" style="width: 200px;"  data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="next">Retour au menu</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>

        var arr = [];
        var cont = document.getElementById("ul_container");
        var numberOfQuestions = parseInt(sessionStorage.getItem('numberOfQuestions'));

        for(let i = 1; i < numberOfQuestions+1; i++){
            arr.push("Question " + i);
        }

        var ul = document.createElement('ul');
        ul.setAttribute('class', 'list-group');
        ul.setAttribute('style', 'width: 100%;');

        for(i = 0; i <= arr.length - 1; i++){
            var li = document.createElement('li');
            li.setAttribute('class', 'list-group-item');
            li.setAttribute('id', i);
            li.setAttribute('onClick', 'getCorrection(this.id)');
            var img = document.createElement('img');
            img.setAttribute('id', 'image'+(i+1));
            img.setAttribute('style', 'width: 20px');
            img.setAttribute('alt', ' ');
            img.setAttribute('align', 'absmiddle');
            var p = document.createElement('p');
            p.innerHTML = arr[i];
            p.appendChild(img);
            li.appendChild(p);
            ul.appendChild(li);
        }

        cont.appendChild(ul);

        var questions = JSON.parse(sessionStorage.getItem('questions'));

        function getCorrection(id){
            var varID = parseInt(id)+1;
            var reponses = sessionStorage.getItem("selectedAnswers"+varID.toString());
            //console.log('selectedAnswers' + varID + " : " + reponses);
            correction.textContent=questions[id].description;
            //selected.textContent=questions[id].description;
            selected.textContent="You selected : ";

            if(questions[id].Answer1 != 'NULL'){
                Ans1.textContent=questions[id].Answer1;
            }else{
                Ans1.textContent="1";
            }
            if(questions[id].Valid1 === true){
                Ans1.style.color = "green";
            }else{
                Ans1.style.color = "red";            
            }
            // if(reponses.includes("answer1")){
            //     Ans1.textContent = "YOU CHOSE --> " + Ans1.textContent;
            // }

            if(questions[id].Answer2 != "NULL"){
                Ans2.textContent=questions[id].Answer2;
            }else{
                Ans2.textContent="";
            }
            if(questions[id].Valid2 === true){
                Ans2.style.color = "green";
            }else{
                Ans2.style.color = "red";            
            }
            // if(reponses.includes("answer2")){
            //     Ans2.textContent = "YOU CHOSE --> " + Ans2.textContent;
            // }

            if(questions[id].Answer3 != "NULL"){
                Ans3.textContent=questions[id].Answer3;
            }else{
                Ans3.textContent="";
            }
            if(questions[id].Valid3 === true){
                Ans3.style.color = "green";
            }else{
                Ans3.style.color = "red";            
            }
            // if(reponses.includes("answer3")){
            //     Ans3.textContent = "YOU CHOSE --> " + Ans3.textContent;
            // }

            if(questions[id].Answer4 != "NULL"){
                Ans4.textContent=questions[id].Answer4;
            }else{
                Ans4.textContent="";
            }
            if(questions[id].Valid4 === true){
                Ans4.style.color = "green";
            }else{
                Ans4.style.color = "red";            
            }
            // if(reponses.includes("answer4")){
            //     Ans4.textContent = "YOU CHOSE --> " + Ans4.textContent;
            // }

            if(questions[id].Answer5 != "NULL"){
                Ans5.textContent=questions[id].Answer5;
            }else{
                Ans5.textContent="";
            }
            if(questions[id].Valid5 === true){
                Ans5.style.color = "green";
            }else{
                Ans5.style.color = "red";            
            }
            // if(reponses.includes("answer5")){
            //     Ans5.textContent = "YOU CHOSE --> " + Ans5.textContent;
            // }

            if(questions[id].Answer6 != "NULL"){
                Ans6.textContent=questions[id].Answer6;
            }else{
                Ans6.textContent="";
            }
            if(questions[id].Valid6 === true){
                Ans6.style.color = "green";
            }else{
                Ans6.style.color = "red";            
            }
            // if(reponses.includes("answer6")){
            //     Ans6.textContent = "YOU CHOSE --> " + Ans6.textContent;
            // }

            if(questions[id].Answer7 != "NULL"){
                Ans7.textContent=questions[id].Answer7;
            }else{
                Ans7.textContent="";
            }
            if(questions[id].Valid7 === true){
                Ans7.style.color = "green";
            }else{
                Ans7.style.color = "red";            
            }
            // if(reponses.includes("answer7")){
            //     Ans7.textContent = "YOU CHOSE --> " + Ans7.textContent;
            // }

            if(questions[id].Answer8 != "NULL"){
                Ans8.textContent=questions[id].Answer8;
            }else{
                Ans8.textContent="";
            }
            if(questions[id].Valid8 === true){
                Ans8.style.color = "green";
            }else{
                Ans8.style.color = "red";            
            }
            // if(reponses.includes("answer8")){
            //     Ans8.textContent = "YOU CHOSE --> " + Ans8.textContent;
            // }

            if(questions[id].Answer9 != "NULL"){
                Ans9.textContent=questions[id].Answer9;
            }else{
                Ans9.textContent="";
            }
            if(questions[id].Valid9 === true){
                Ans9.style.color = "green";
            }else{
                Ans9.style.color = "red";            
            }
            // if(reponses.includes("answer9")){
            //     Ans9.textContent = "YOU CHOSE --> " + Ans9.textContent;
            // }

            if(questions[id].Answer10 != "NULL"){
                Ans10.textContent=questions[id].Answer10;
            }else{
                Ans10.textContent="";
            }
            if(questions[id].Valid10 === true){
                Ans10.style.color = "green";
            }else{
                Ans10.style.color = "red";            
            }
            // if(reponses.includes("answer10")){
            //     Ans10.textContent = "YOU CHOSE --> " + Ans10.textContent;
            // }

            if(questions[id].Answer11 != "NULL"){
                Ans11.textContent=questions[id].Answer11;
            }else{
                Ans11.textContent="";
            }
            if(questions[id].Valid11 === true){
                Ans11.style.color = "green";
            }else{
                Ans11.style.color = "red";            
            }
            // if(reponses.includes("answer11")){
            //     Ans11.textContent = "YOU CHOSE --> " + Ans11.textContent;
            // }

            // Réponses données par l'utilisateur
            if(reponses.includes("answer1")){
                Sel1.textContent = Ans1.textContent;
            }else{
                Sel1.textContent = "";
            }
            if(questions[id].Valid1 === true){
                Sel1.style.color = "green";
            }else{
                Sel1.style.color = "red";            
            }
            
            if(reponses.includes("answer2")){
                Sel2.textContent = Ans2.textContent;
            }else{
                Sel2.textContent = "";
            }
            if(questions[id].Valid2 === true){
                Sel2.style.color = "green";
            }else{
                Sel2.style.color = "red";            
            }
            
            if(reponses.includes("answer3")){
                Sel3.textContent = Ans3.textContent;
            }else{
                Sel3.textContent = "";
            }
            if(questions[id].Valid3 === true){
                Sel3.style.color = "green";
            }else{
                Sel3.style.color = "red";            
            }
            
            if(reponses.includes("answer4")){
                Sel4.textContent = Ans4.textContent;
            }else{
                Sel4.textContent = "";
            }
            if(questions[id].Valid4 === true){
                Sel4.style.color = "green";
            }else{
                Sel4.style.color = "red";            
            }
            
            if(reponses.includes("answer5")){
                Sel5.textContent = Ans5.textContent;
            }else{
                Sel5.textContent = "";
            }
            if(questions[id].Valid5 === true){
                Sel5.style.color = "green";
            }else{
                Sel5.style.color = "red";            
            }
            
            if(reponses.includes("answer6")){
                Sel6.textContent = Ans6.textContent;
            }else{
                Sel6.textContent = "";
            }
            if(questions[id].Valid6 === true){
                Sel6.style.color = "green";
            }else{
                Sel6.style.color = "red";            
            }
            
            if(reponses.includes("answer7")){
                Sel7.textContent = Ans7.textContent;
            }else{
                Sel7.textContent = "";
            }
            if(questions[id].Valid7 === true){
                Sel7.style.color = "green";
            }else{
                Sel7.style.color = "red";            
            }
            
            if(reponses.includes("answer8")){
                Sel8.textContent = Ans8.textContent;
            }else{
                Sel8.textContent = "";
            }
            if(questions[id].Valid8 === true){
                Sel8.style.color = "green";
            }else{
                Sel8.style.color = "red";            
            }
            
            if(reponses.includes("answer9")){
                Sel9.textContent = Ans9.textContent;
            }else{
                Sel9.textContent = "";
            }
            if(questions[id].Valid9 === true){
                Sel9.style.color = "green";
            }else{
                Sel9.style.color = "red";            
            }
            
            if(reponses.includes("answer10")){
                Sel10.textContent = Ans10.textContent;
            }else{
                Sel10.textContent = "";
            }
            if(questions[id].Valid10 === true){
                Sel10.style.color = "green";
            }else{
                Sel10.style.color = "red";            
            }
            
            if(reponses.includes("answer11")){
                Sel11.textContent = Ans11.textContent;
            }else{
                Sel11.textContent = "";
            }
            if(questions[id].Valid11 === true){
                Sel11.style.color = "green";
            }else{
                Sel11.style.color = "red";            
            }

        }
    </script>
</html>